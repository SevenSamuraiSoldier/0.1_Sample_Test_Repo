<html lang="en"><head>
        <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
        <meta name="robots" content="noindex">

        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Animal Selector</title>

        <style id="jsbin-css">
            * {
                margin: 0;
                padding: 0;
                box-sizing: border-box;
            }

            body {
                position: relative;
                background-color: #333;
                color: #bebebe;
                font-family: Arial, sans-serif;
                min-height: 100vh;
                display: flex;
                flex-direction: column;
                align-items: center;
                justify-content: start;
                padding: 20px;
            }

            .container {
                position: relative;
                width: 100%;
                max-width: 400px;
                text-align: center;
            }

            input[type="text"],button {
                width: 100%;
                padding: 12px;
                margin: 20px 0;
                background-color: #444;
                color: #bebebe;
                border: 1px solid #666;
                border-radius: 4px;
                font-size: 16px;
            }
            button {
                width: unset;
                transition: 0.3s ease-in-out;
            }
            button:hover {
                scale: 1.1;
                background-color: #535353;
            }

            input[type="text"]:focus {
                outline: none;
                border-color: #bebebe;
            }

            #output {
                margin-top: 20px;
                padding: 15px;
                background-color: #444;
                border-radius: 4px;
                min-height: 50px;
                display: flex;
                align-items: center;
                justify-content: center;
                font-size: 18px;
            }

            datalist {
                background-color: #444;
                color: #bebebe;
            }

            /* Add this to styles.css */
            #counter {
                position: absolute;
                top: 10px;
                right: 20px;
                padding: 5px 10px;
                background: #444;
                border-radius: 4px;
                font-size: 14px;
            }

            body {
                position: relative;
                padding-top: 5rem;
            }
        </style>
    </head>
    <body>
        <div class="container" style="position: relative">
            <h1>Animal Selector</h1>
            <input type="text" list="animals" placeholder="Select or type an animal" id="animalInput">
            <datalist id="animals">
                <option value="Dog"></option>
                <option value="Cat"></option>
                <option value="Elephant"></option>
                <option value="Lion"></option>
                <option value="Tiger"></option>
                <option value="Bear"></option>
                <option value="Wolf"></option>
                <option value="Fox"></option>
                <option value="Rabbit"></option>
                <option value="Deer"></option>
                <option value="Monkey"></option>
                <option value="Giraffe"></option>
                <option value="Zebra"></option>
                <option value="Kangaroo"></option>
                <option value="Panda"></option>
                <option value="Horse"></option>
                <option value="Cow"></option>
                <option value="Pig"></option>
                <option value="Sheep"></option>
                <option value="Goat"></option>
                <option value="Albatross"></option>
                <option value="Alligator"></option>
                <option value="Alpaca"></option>
                <option value="Anaconda"></option>
                <option value="Antelope"></option>
                <option value="Arctic Fox"></option>
                <option value="Armadillo"></option>
                <option value="Axolotl"></option>
                <option value="Badger"></option>
                <option value="Bald Eagle"></option>
                <option value="Barracuda"></option>
                <option value="Bat"></option>
                <option value="Beaver"></option>
                <option value="Beluga Whale"></option>
                <option value="Blue Whale"></option>
                <option value="Bobcat"></option>
                <option value="Bonobo"></option>
                <option value="Cheetah"></option>
                <option value="Chimpanzee"></option>
                <option value="Cobra"></option>
                <option value="Cockatoo"></option>
                <option value="Coelacanth"></option>
                <option value="Cougar"></option>
                <option value="Crocodile"></option>
                <option value="Dolphin"></option>
                <option value="Dugong"></option>
                <option value="Eagle"></option>
                <option value="Emu"></option>
                <option value="Falcon"></option>
                <option value="Flamingo"></option>
                <option value="Gazelle"></option>
                <option value="Gecko"></option>
                <option value="Gibbon"></option>
                <option value="Gorilla"></option>
                <option value="Hammerhead Shark"></option>
                <option value="Hedgehog"></option>
                <option value="Hippopotamus"></option>
                <option value="Hyena"></option>
                <option value="Iguana"></option>
                <option value="Jaguar"></option>
                <option value="Jellyfish"></option>
                <option value="Kangaroo Rat"></option>
                <option value="Kingfisher"></option>
                <option value="Koala"></option>
                <option value="Komodo Dragon"></option>
                <option value="Lemur"></option>
                <option value="Leopard"></option>
                <option value="Lynx"></option>
                <option value="Manatee"></option>
                <option value="Manta Ray"></option>
                <option value="Mongoose"></option>
                <option value="Narwhal"></option>
                <option value="Ocelot"></option>
                <option value="Octopus"></option>
                <option value="Orangutan"></option>
                <option value="Ostrich"></option>
                <option value="Otter"></option>
                <option value="Pangolin"></option>
                <option value="Peacock"></option>
                <option value="Pelican"></option>
                <option value="Penguin"></option>
                <option value="Platypus"></option>
                <option value="Polar Bear"></option>
                <option value="Porcupine"></option>
                <option value="Puma"></option>
                <option value="Quokka"></option>
                <option value="Raccoon"></option>
                <option value="Rhinoceros"></option>
                <option value="Seahorse"></option>
                <option value="Snow Leopard"></option>
                <option value="Tapir"></option>
                <option value="Tasmanian Devil"></option>
                <option value="Toucan"></option>
                <option value="Vulture"></option>
                <option value="Walrus"></option>
                <option value="Wombat"></option>
                <option value="Yak"></option>
                <option value="Zebu"></option>
                <option value="Panther"></option>
                <option value="Black Panther"></option>
                <option value="Chicken"></option>
                <option value="Orca"></option>
                <option value="Hen"></option>
                <option value="Crow"></option>
                <option value="Sparrow"></option>
                <option value="Pigeon"></option>
                <option value="Turtle"></option>
                <option value="Tortoise"></option>
                <option value="Llama"></option>
                <option value="Squid"></option>
                <option value="Shark"></option>
                <option value="Great White Shark"></option>
                <option value="Tiger Shark"></option>
                <option value="Grizzly Bear"></option>
                <option value="Snake"></option>
                <option value="Python"></option>
                <option value="Rattle Snake"></option>
                <option value="Sea Snake"></option>
                <option value="Eel"></option>
                <option value="Electric Eel"></option>
                <option value="Salamander"></option>
                <option value="Hamster"></option>
                <option value="Wild Boar"></option>
                <option value="Camel"></option>
                <option value="Donkey"></option>
                <option value="Kite"></option>
                <option value="Wood Pecker"></option>
                <option value="Sperm Whale"></option>
                <option value="Whale Shark"></option>
                <option value="Lobster"></option>
                <option value="Shrimp"></option>
                <option value="Prawn"></option>
                <option value="Crab"></option>
                <option value="Scorpion"></option>
                <option value="Squirrel"></option>
                <option value="Chipmunk"></option>
                <option value="Goose"></option>
                <option value="Moose"></option>
                <option value="Bison"></option>
                <option value="Buffalo"></option>
                <option value="Skunk"></option>
                <option value="Bull"></option>
            <option value="Snow Fairy Bird"></option><option value="T-rex"></option><option value="Rapter"></option></datalist>
            <div id="output">Selected animal will appear here</div>
            <!-- Button to trigger download -->
            <button id="downloadBtn" onclick="downloadHTML()">Save Page</button>
        </div>
        <div id="counter">Options: 145</div>
        <script id="jsbin-javascript">
            const input = document.getElementById("animalInput");
            const output = document.getElementById("output");
            const datalist = document.getElementById("animals");
            const counter = document.getElementById("counter");
            const downloadBtn = document.getElementById('downloadBtn');

            let customAnimals = new Set();
            // Create counter element

            // Add counter to the container
            const container = document.querySelector(".container");
            /*
                container.style.position = 'relative';
                counter.style.position = 'absolute';
                counter.style.top = '20px';
                counter.style.right = '20px';
                counter.style.padding = '5px 10px';
                counter.style.background = '#444';
                counter.style.borderRadius = '4px';
                counter.style.fontSize = '14px';
                container.prepend(counter);
                document.body.appendChild(counter);
            */
            

            function updateCounter() {
                //const totalOptions = datalist.options.length;
                const totalOptions = datalist.querySelectorAll("option").length;
                counter.textContent = `Options: ${totalOptions}`;
            }

            input.addEventListener("input", () => {
                output.textContent =
                    input.value || "Selected animal will appear here";
            });

            input.addEventListener("keydown", (e) => {
                if (e.key === "Enter" && input.value.trim()) {
                    const value = input.value.trim();

                    const allOptions = Array.from(datalist.options).map(
                        (opt) => opt.value
                    );
                    if (
                        !allOptions.includes(value) &&
                        !customAnimals.has(value)
                    ) {
                        const newOption = document.createElement("option");
                        // Code line to capitalize first letter of every word in new custom options----------
                        var newValue = value
                            .split(" ")
                            .map(
                                (word) =>
                                    word.charAt(0).toUpperCase() + word.slice(1)
                            )
                            .join(" ");
                        newOption.value = newValue;
                        datalist.appendChild(newOption);
                        customAnimals.add(newValue);
                        output.textContent = `Added new animal: ${newValue}`;
                        input.value = "";
                        updateCounter(); // Update count after adding
                    } else {
                        output.textContent = `${newValue} already exists!`;
                    }
                    e.preventDefault();
                }
            });

            function getPageFilename() {
                const path = window.location.pathname;
                let filename = path.substring(path.lastIndexOf('/') + 1);
                filename = filename.split('?')[0]; // Remove query parameters
                filename = decodeURIComponent(filename);
                console.log(filename);
                
                // Handle empty filenames (e.g., trailing slash URLs)
                return filename;
            }
            function generateNextFilename() {
                const currentFilename = getPageFilename();
                
                // Split into base name and extension
                const [base, extension = 'html'] = currentFilename.split(/\.([^.]+)$/);
                
                
                // Find trailing numbers in base name
                const numberMatch = base.match(/_(\d+)$/);
                //const numberMatch = base.match(/(\D*)(\d+)$/);
                
                let newBase;
                if (numberMatch) {
                    // Increment existing number
                    const newNumber = parseInt(numberMatch[1], 10) + 1;
                    newBase = base.replace(/_\d+$/, `_${newNumber}`);
                    //newBase = `${prefix}${newNumber}`;
                } else {
                    // Add new number suffix
                    newBase = `${base}_1`;
                }
                return `${newBase}.${extension}`;
                
            }

            function downloadHTML() {
                // Get the current HTML content
                const htmlContent = document.documentElement.outerHTML;

                // Create a Blob object with the HTML content
                const blob = new Blob([htmlContent], { type: 'text/html' });

                // Create a temporary anchor element
                const a = document.createElement('a');
                a.href = URL.createObjectURL(blob);
                // Set the file name for download
                a.download = generateNextFilename();

                // Programmatically click the anchor to trigger download
                a.click();

                // Clean up
                URL.revokeObjectURL(a.href);
            }
            // Initial counter update
            updateCounter();
        </script>
    

</body></html>